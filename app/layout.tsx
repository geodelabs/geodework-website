import AdSense from "@/components/AdSense"
import Matomo from "@/components/Matomo"
import Socials from "@/components/Socials"
import Subscribe from "@/components/Subscribe"
import Heart from "@/components/svgs/heart.svg"
import Link from "@/components/ui/link"

import { cn } from "@/lib/utils"

import "@/styles/globals.css"

import { generateMetadata } from "@/lib/metadata"
export const metadata = generateMetadata()

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang="en" suppressHydrationWarning>
      <head>
        <link
          rel="preload"
          href="/fonts/ibm-plex-mono/IBMPlexMono-Regular.woff2"
          as="font"
          type="font/woff2"
          crossOrigin="anonymous"
        />
        {/* https://nextjs.org/docs/app/api-reference/file-conventions/metadata/app-icons */}
        <link rel="icon" href="/favicon.ico" sizes="any" />
        <link rel="icon" href="/icon.svg" type="image/svg+xml" sizes="any" />
        <link
          rel="apple-touch-icon"
          href="/apple-icon.png"
          type="image/png"
          sizes="180x180"
        />
        <AdSense />
      </head>

      <body className="mx-auto grid min-h-screen max-w-screen-lg grid-rows-[auto_1fr_auto] px-4">
        <header
          className={cn(
            "z-10 row-start-1 w-full py-8 max-sm:flex-col",
            "flex items-center justify-between gap-3",
            "[&_a]:outline-offset-8"
          )}
        >
          {/* Header start */}
          <Link href="/" className="flex items-center">
            <Logo />
          </Link>

          {/* Header end */}
          <nav
            className="flex gap-6"
            style={{ textShadow: "0 0 1rem rgba(0,0,0,0.75)" }}
          >
            <Link href="/#">Home</Link>
            <Link href="/about">About</Link>
            <Link href="/blog">Blog</Link>
            <Link href="/grants">Grants</Link>
          </nav>
        </header>

        <main className="row-start-2">{children}</main>

        <footer className="row-start-3 my-14 flex flex-col items-center gap-6">
          <Subscribe />

          <p className="-mt-2">
            Donate: <Link href="/donate">geodelabs.eth</Link>{" "}
            <Heart className="inline text-[red]" />
          </p>

          <Socials />

          <div className="flex flex-wrap gap-6">
            <Link href="/terms-of-use">Terms of Use</Link>
            <Link href="/privacy-policy">Privacy Policy</Link>
          </div>

          <p className="w-full p-4 text-center text-body-secondary">
            &copy; Geode Labs {new Date().getFullYear()}
          </p>
        </footer>

        <Matomo />
      </body>
    </html>
  )
}

const Logo = ({ className, ...props }: React.SVGProps<SVGSVGElement>) => (
  <svg
    viewBox="14 40 383 115"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    className={cn("h-8 w-auto", className)}
    {...props}
  >
    <path
      d="M180.693 115.405H180.34C179.964 117.895 178.696 119.963 176.535 121.607C174.373 123.252 171.437 124.074 167.725 124.074C164.906 124.074 162.274 123.533 159.831 122.453C157.388 121.372 155.25 119.775 153.417 117.66C151.585 115.546 150.152 112.915 149.118 109.767C148.085 106.619 147.568 102.977 147.568 98.8424C147.568 94.7077 148.108 91.0428 149.189 87.8477C150.269 84.6527 151.773 81.9745 153.699 79.8132C155.673 77.6518 158.022 76.0073 160.747 74.8796C163.472 73.752 166.503 73.1882 169.839 73.1882C174.256 73.1882 178.062 74.1514 181.257 76.0778C184.452 77.9572 186.965 80.7999 188.798 84.6057L180.058 89.6097C179.307 87.6833 178.132 86.0623 176.535 84.7467C174.937 83.3841 172.705 82.7028 169.839 82.7028C166.503 82.7028 163.848 83.666 161.875 85.5924C159.902 87.5188 158.915 90.5494 158.915 94.6842V102.578C158.915 106.666 159.902 109.696 161.875 111.67C163.848 113.596 166.503 114.559 169.839 114.559C171.155 114.559 172.4 114.418 173.574 114.136C174.749 113.807 175.783 113.338 176.675 112.727C177.568 112.069 178.249 111.294 178.719 110.401C179.236 109.508 179.495 108.451 179.495 107.229V104.763H170.332V95.8118H189.714V123.228H180.693V115.405Z"
      fill="white"
    />
    <path
      d="M225.57 124.074C222.751 124.074 220.237 123.627 218.029 122.735C215.821 121.795 213.941 120.503 212.391 118.858C210.887 117.167 209.736 115.123 208.937 112.727C208.185 110.33 207.809 107.652 207.809 104.692C207.809 101.779 208.185 99.1478 208.937 96.7985C209.689 94.4022 210.793 92.3584 212.25 90.6669C213.753 88.9754 215.586 87.6833 217.747 86.7905C219.908 85.8508 222.375 85.381 225.147 85.381C228.201 85.381 230.809 85.8978 232.97 86.9315C235.179 87.9652 236.964 89.3513 238.327 91.0897C239.736 92.8282 240.746 94.8486 241.357 97.1509C242.015 99.4062 242.344 101.779 242.344 104.269V107.37H218.593V107.934C218.593 110.377 219.25 112.327 220.566 113.784C221.882 115.193 223.949 115.898 226.768 115.898C228.93 115.898 230.692 115.475 232.054 114.63C233.417 113.737 234.685 112.68 235.86 111.458L241.075 117.942C239.431 119.869 237.27 121.372 234.591 122.453C231.96 123.533 228.953 124.074 225.57 124.074ZM225.359 93.0632C223.244 93.0632 221.576 93.7679 220.355 95.1775C219.18 96.5401 218.593 98.3725 218.593 100.675V101.239H231.561V100.604C231.561 98.3491 231.044 96.5401 230.01 95.1775C229.024 93.7679 227.473 93.0632 225.359 93.0632Z"
      fill="white"
    />
    <path
      d="M275.294 124.074C272.569 124.074 270.126 123.627 267.965 122.735C265.85 121.842 264.041 120.55 262.538 118.858C261.081 117.167 259.954 115.123 259.155 112.727C258.356 110.33 257.957 107.652 257.957 104.692C257.957 101.732 258.356 99.0538 259.155 96.6576C259.954 94.2613 261.081 92.2409 262.538 90.5964C264.041 88.9049 265.85 87.6128 267.965 86.7201C270.126 85.8273 272.569 85.381 275.294 85.381C278.02 85.381 280.439 85.8273 282.554 86.7201C284.715 87.6128 286.524 88.9049 287.981 90.5964C289.484 92.2409 290.635 94.2613 291.434 96.6576C292.233 99.0538 292.632 101.732 292.632 104.692C292.632 107.652 292.233 110.33 291.434 112.727C290.635 115.123 289.484 117.167 287.981 118.858C286.524 120.55 284.715 121.842 282.554 122.735C280.439 123.627 278.02 124.074 275.294 124.074ZM275.294 115.828C277.362 115.828 278.959 115.193 280.087 113.925C281.215 112.656 281.779 110.847 281.779 108.498V100.957C281.779 98.6075 281.215 96.7985 280.087 95.5299C278.959 94.2613 277.362 93.627 275.294 93.627C273.227 93.627 271.63 94.2613 270.502 95.5299C269.374 96.7985 268.81 98.6075 268.81 100.957V108.498C268.81 110.847 269.374 112.656 270.502 113.925C271.63 115.193 273.227 115.828 275.294 115.828Z"
      fill="white"
    />
    <path
      d="M333.33 117.026H332.978C332.696 118.013 332.25 118.952 331.639 119.845C331.028 120.691 330.276 121.443 329.384 122.1C328.538 122.711 327.551 123.181 326.423 123.51C325.343 123.886 324.215 124.074 323.041 124.074C318.342 124.074 314.794 122.429 312.398 119.14C310.002 115.804 308.804 110.988 308.804 104.692C308.804 98.396 310.002 93.6035 312.398 90.3145C314.794 87.0255 318.342 85.381 323.041 85.381C325.437 85.381 327.551 86.0388 329.384 87.3544C331.263 88.67 332.461 90.3615 332.978 92.4288H333.33V71.0738H343.761V123.228H333.33V117.026ZM326.494 115.616C328.467 115.616 330.088 115.146 331.357 114.207C332.673 113.22 333.33 111.881 333.33 110.189V99.2653C333.33 97.5738 332.673 96.2582 331.357 95.3185C330.088 94.3318 328.467 93.8384 326.494 93.8384C324.521 93.8384 322.876 94.5432 321.56 95.9528C320.292 97.3154 319.658 99.1713 319.658 101.521V107.934C319.658 110.283 320.292 112.163 321.56 113.572C322.876 114.935 324.521 115.616 326.494 115.616Z"
      fill="white"
    />
    <path
      d="M379.522 124.074C376.703 124.074 374.189 123.627 371.981 122.735C369.772 121.795 367.893 120.503 366.343 118.858C364.839 117.167 363.688 115.123 362.889 112.727C362.137 110.33 361.761 107.652 361.761 104.692C361.761 101.779 362.137 99.1478 362.889 96.7985C363.641 94.4022 364.745 92.3584 366.202 90.6669C367.705 88.9754 369.538 87.6833 371.699 86.7905C373.86 85.8508 376.327 85.381 379.099 85.381C382.153 85.381 384.761 85.8978 386.922 86.9315C389.131 87.9652 390.916 89.3513 392.279 91.0897C393.688 92.8282 394.698 94.8486 395.309 97.1509C395.967 99.4062 396.296 101.779 396.296 104.269V107.37H372.545V107.934C372.545 110.377 373.202 112.327 374.518 113.784C375.834 115.193 377.901 115.898 380.72 115.898C382.882 115.898 384.643 115.475 386.006 114.63C387.369 113.737 388.637 112.68 389.812 111.458L395.027 117.942C393.383 119.869 391.222 121.372 388.543 122.453C385.912 123.533 382.905 124.074 379.522 124.074ZM379.311 93.0632C377.196 93.0632 375.528 93.7679 374.307 95.1775C373.132 96.5401 372.545 98.3725 372.545 100.675V101.239H385.513V100.604C385.513 98.3491 384.996 96.5401 383.962 95.1775C382.975 93.7679 381.425 93.0632 379.311 93.0632Z"
      fill="white"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M68.6746 85.5705L56.7452 97.5L68.6746 109.429L80.604 97.5L68.6746 85.5705ZM63.4258 97.5L68.6746 102.749L73.9234 97.5L68.6746 92.2512L63.4258 97.5Z"
      fill="white"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M68.6746 71.05L91.5809 84.275V110.725L68.6746 123.95L45.7683 110.725V84.275L68.6746 71.05ZM86.857 87.0023L68.6746 76.5047L50.4922 87.0023V107.998L68.6746 118.495L86.857 107.998V87.0023Z"
      fill="white"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M68.6746 55.6452L39.0788 67.9042L26.8199 97.5L39.0788 127.096L68.6746 139.355L98.2704 127.096L110.529 97.5L98.2704 67.9042L68.6746 55.6452ZM68.6746 60.7583L94.6548 71.5197L105.416 97.5L94.6548 123.48L68.6746 134.242L42.6944 123.48L31.933 97.5L42.6944 71.5197L68.6746 60.7583Z"
      fill="white"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M68.6746 40.0449L34.9034 51.0179L14.0316 79.7454V115.255L34.9034 143.982L68.6746 154.955L102.446 143.982L123.318 115.255V79.7454L102.446 51.0179L68.6746 40.0449ZM68.6746 45.0119L99.5263 55.0363L118.594 81.2803V113.72L99.5263 139.964L68.6746 149.988L37.8229 139.964L18.7555 113.72V81.2803L37.8229 55.0363L68.6746 45.0119Z"
      fill="white"
    />
  </svg>
)
